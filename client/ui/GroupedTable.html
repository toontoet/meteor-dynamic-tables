<template name="GroupedTable">
  <style>
    .grouped-table-manage-controller {
      cursor: pointer;
      margin-right: 20px;
      vertical-align: middle;
      line-height: 20px;
    }
  </style>
  <div style="height: 40px;">
    <div class="pull-left">
      {{#if searching}}
        <input type="text" placeholder="Search..." class="dynamic-table-global-search" />
      {{/if}}
    </div>
    <div class="pull-right">
      {{#if advancedControl "filtering"}}
        <span class="filters grouped-table-manage-controller {{#if filters}} active {{/if}}">
          <i class="fa fa-filter"></i> Filters
        </span>
      {{/if}}
      {{#if advancedControl "ordering"}}
        <span class="orders grouped-table-manage-controller {{#if orders}} active {{/if}}">
          <i class="fa fa-sort"></i> Sort
        </span>
      {{/if}}
      {{#if advancedControl "columning"}}
        <span class="columns grouped-table-manage-controller">
          <i class="fa fa-eye-slash"></i> Hide/Show Columns
        </span>
      {{/if}}
      {{#if advancedControl "grouping"}}
        <!-- manage-group-fields needed for compatibility support only; to be removed in 2.0 release -->
        <span class="groups grouped-table-manage-controller manage-group-fields {{#if aGroupChain}} active {{/if}}">
          <i class="fa fa-th-list"></i> Group
        </span>
      {{/if}}
    </div>
  </div>
  {{#if aGroupChain}}
    {{> dynamicTableGroup
      forceRefresh=forceRefresh
      showPrefix=showPrefix
      noGroups=noGroups
      loading=loading
      expandAll=expandAll
      lazy=lazy
      customTableSpec=customTableSpec
      groupableFields=groupableFields
      advanced=advanced
      selector=selector
      tableId=tableId

      groupChain=aGroupChain
      orders=orders
      columns=columns

      custom=rootCustom

      orderCheckFn=orderCheckFn
    }}
  {{else}}
    {{> CustomizableTable
      table
    }}
  {{/if}}
</template>
