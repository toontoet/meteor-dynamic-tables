<template name="GroupedTable">
  <style>
    .grouped-table-manage-controller {
      cursor: pointer;
      margin-right: 20px;
      vertical-align: middle;
      line-height: 20px;
    }
  </style>
  <div style="height: 40px;">
    <div class="pull-left">
      {{#if searching}}
        <input type="text" placeholder="Search..." class="dynamic-table-global-search" />
      {{/if}}
    </div>
    <div class="pull-right">
      {{#if advanced.searching.root}}
        <span class="advanced-search grouped-table-manage-controller {{#if advancedSearch}} active {{/if}}">
          <i class="fa fa-search"></i> Advanced Search
        </span>
      {{/if}}
      {{#if advanced.ordering.root}}
        <span class="aspects grouped-table-manage-controller {{#if aspects}} active {{/if}}">
          <i class="fa fa-sort"></i> Sort
        </span>
      {{/if}}
      {{#if advanced.columning.root}}
        <span class="columns grouped-table-manage-controller">
          <i class="fa fa-eye-slash"></i> Hide/Show Columns
        </span>
      {{/if}}
      {{#if advanced.grouping.root}}
        <span class="groups grouped-table-manage-controller {{#if aGroupChain}} active {{/if}}">
          <i class="fa fa-th-list"></i> Group
        </span>
      {{/if}}
    </div>
  </div>
  {{#if aGroupChain}}
    {{> dynamicTableGroup
      forceRefresh=forceRefresh
      showPrefix=showPrefix
      noGroups=noGroups
      loading=loading
      expandAll=expandAll
      lazy=lazy
      customTableSpec=customTableSpec
      groupableFields=groupableFields
      advanced=advanced
      selector=selector
      tableId=tableId

      groupChain=aGroupChain
      aspects=aspects
      columns=columns

      custom=rootCustom

      orderCheckFn=orderCheckFn
    }}
  {{else}}
    {{> CustomizableTable
      table
    }}
  {{/if}}
</template>
